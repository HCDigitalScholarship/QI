
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

{% load staticfiles %}
{% load more_like_this %}
<!doctype html>
<html class="no-js" lang="en">

<head>
  {% include 'top-links.html' %}
  <title>Penn's Treaty | Search </title>
</head>


<body>

      {% include 'header.html' %}

      <div id = "row1">
      <!--     Navigation Menu Below:  -->

        {% include 'nav.html' %}

      </div>

      <div id ="row2">
        <div class="row">
          <br />
        <h1>Search</h1>
        <br />
      </div>
      </div>

<br />
<div class=container>


<div id="row3">


    <div class="well">  <form method="get" action=".">
        <!--  <table>-->

          <!--    {{ form.as_p }}-->


      <p><label for="id_q">Search:</label> <input id="id_q" name="q" type="search" placeholder="search"></p>


      <div class="col-sm-2">  <label for="id_models_0"><b>Narrow Your Search:</b></label></div>
      <div class="col-sm-2">  <label for="id_models_3"><input id="id_models_3" name="models" type="checkbox" value="QI.person"> People</label> </div>
      <div class="col-sm-2">  <label for="id_models_4"><input id="id_models_4" name="models" type="checkbox" value="QI.place"> Places</label> </div>
      <div class="col-sm-2">  <label for="id_models_1"><input id="id_models_1" name="models" type="checkbox" value="QI.org"> Organizations</label> </div>
      <div class="col-sm-2">  <label for="id_models_0"><input id="id_models_0" name="models" type="checkbox" value="QI.manuscript"> Manuscripts</label> </div>
      <div class="col-sm-2">  <label for="id_models_2"><input id="id_models_2" name="models" type="checkbox" value="QI.page"> Pages of Manuscripts</label> </div>


              <!--<tr>-->
  <br />
  <input type="submit" class="button" value="Search">

            <!--  </tr>-->
        <!--  </table>-->

  </div>


        {% if query %}

            <h3>Results</h3>




            {% with page.object_list as results %}
           {% regroup results|dictsort:"modeltype" by modeltype as grouped_objects %}
           {% for ct in grouped_objects %}
          <!--     <h4> <b>{{ ct.grouper }}</b> ({{ ct.list|length }}) </h4> --> <!--This is the name of the category-->

          <div class="panel-group">
              <div class="panel panel-default">
               <div class="panel-heading">
                 <h4 class="panel-title">

                   <a data-toggle="collapse" href="#collapse{{ ct.grouper }}"> <font color =#008CBA face='Open Sans'><h4><b>{{ ct.grouper }}</b> ({{ ct.list|length }})</h4></font> </a>

                 </h4>
               </div>

               <div id="collapse{{ ct.grouper }}" class="panel-collapse collapse">

                 <ul class="list-group">  <!--setting up list group per CT-->

               {% for result in ct.list %}

                       {% if result.object.get_type == 'People' %}

                    <li class = "list-group-item">   <a href="/person/{{ result.object.id_tei }}">{{ result.object.first_name }} {{ result.object.last_name}}</a> </li>

                       {% elif result.object.get_type == 'Places' %}

                    <li class = "list-group-item">   <a href="/place/{{ result.object.id_tei }}">{{ result.object.name }}</a> </li>

                       {% elif result.object.get_type == 'Groups' %}

                    <li class = "list-group-item">   <a href="/org/{{ result.object.id_tei }}">{{ result.object.organization_name }}</a> </li>

                       {% elif result.object.get_type == 'Pages' %}

                    <li class = "list-group-item">   <a href="/page/{{ result.object.id_tei }}">{{ result.object.id_tei }}</a> </li>

                       {% else %}

                    <li class = "list-group-item">   <a href="/page/{{ result.object.id_tei }}_001">{{ result.object.title }}</a> </li>

                       {% endif %}
                
               {% endfor %}

             </ul>
           </div>
             </div>
           </div>
           {% empty %}
               <p>No results found.</p>
           {% endfor %}
       {% endwith %}


       <!--


            {% for result in page.object_list %}
                <p>

                    {% if result.object.get_type == 'Person' %}

                    <a href="/person/{{ result.object.id_tei }}">{{ result.object.first_name }} {{ result.object.last_name}}</a>

                    {% elif result.object.get_type == 'Place' %}

                    <a href="/place/{{ result.object.id_tei }}">{{ result.object.name }}</a>

                    {% elif result.object.get_type == 'Org' %}

                    <a href="/org/{{ result.object.id_tei }}">{{ result.object.organization_name }}</a>

                    {% elif result.object.get_type == 'Page' %}

                    <a href="/page/{{ result.object.id_tei }}">{{ result.object.id_tei }}</a>

                    {% elif result.object.get_type == 'Manuscript' %}

                    <a href="/page/{{ result.object.id_tei }}_001">{{ result.object.title }}</a>

                    {% endif %}

                </p>

            {% empty %}
                <p>No results found.</p>
            {% endfor %}

-->


        {% if page.has_previous or page.has_next %}
                <div>
                    {% if page.has_previous %}<a href="?q={{ query }}&amp;page={{ page.previous_page_number }}">{% endif %}&laquo; Previous{% if page.has_previous %}</a>{% endif %}
                    |
                    {% if page.has_next %}<a href="?q={{ query }}&amp;page={{ page.next_page_number }}">{% endif %}Next &raquo;{% if page.has_next %}</a>{% endif %}
                </div>
            {% endif %}

        {% else %}


        {% endif %}

    </form>
  </div>
</div>
<br />
    {% include 'footer.html' %}

    {% include 'bottom-links.html' %}
</body>
</html>
