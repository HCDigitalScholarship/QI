<!doctype html>
<html class="no-js" lang="en">
<head>
    <title>Search within Manuscript</title>
</head>

{% include 'top-links.html' %}
<body>
{% include 'header.html' %}

<div class="container">
  <h1>Result</h1>

  {% with page.object_list as results %}

  {% regroup results|dictsort:"modeltype" by modeltype as grouped_objects %}

  {% for ct in grouped_objects %}

  {% if ct.grouper in request.get_full_path or not 'models=' in request.get_full_path %}

   <div class="panel-group">
    <div class="panel panel-default">
      <div class="panel-heading">
         <h4 class="panel-title">
            <a data-toggle="collapse" href="#collapse{{ ct.grouper }}"> 
              <font color =#008CBA face='Open Sans'>
                <h4><b>{{ ct.grouper }}</b> ({{ ct.list|length }})</h4></font> </a>
         </h4>
      </div>

      <div id="collapse{{ ct.grouper }}" class="panel-collapse collapse">

         <ul class="list-group">  <!--setting up list group per CT-->

            {% for result in ct.list %}

            {% if result.object.get_type == 'Pages' %}

            <li class = "list-group-item">   <a href="/page/{{ result.object.id_tei }}">{{ result.object.Manuscript_id }}:
             Page {{ result.object.id_tei|slice:"-3:" }}</a> </li>

             {% else %}

            <li class = "list-group-item">   <a href="/page/{{ result.object.id_tei }}_001">{{ result.object.title }}</a> </li>

             {% endif %}

             {% endfor %}

           </ul>
         </div>
        </div>
       </div>


       {% endif %}

       {% empty %}
          <p>No results found.</p>

   {% endfor %}

   {% endwith %}

</div>
</body>
</html>
